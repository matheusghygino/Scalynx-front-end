---
import Layout from "../layout/Layout.astro";

/**
 * thanks.astro — somente conteúdo (usa BaseLayout existente)
 * Personaliza via ?name=...&leadId=...&source=...
 */
export const prerender = true;

const url = new URL(Astro.request.url);
const name = url.searchParams.get("name")?.trim() || "";
const leadId = url.searchParams.get("leadId")?.trim() || "";
const source = url.searchParams.get("source")?.trim() || "";

const title = name ? `Thanks, ${name}!` : "Thanks!";
const subtitle =
  "We’ve received your message. Our team will reach out shortly.";

// Se seu BaseLayout aceita essas props, pode exportá-las;
// se não, elas são inofensivas (ignoradas).
const page = {
  title, // usado pelo layout, se aplicável
  description: "Thank you for contacting us. We’ll get back to you shortly.",
  robots: "noindex,follow", // thanks pages geralmente não indexam
};

const brand = {
  logo: "/LOGO.png", // coloque em /public
  whatsapp: "15084006951", // número no formato E.164 sem sinais
};
---

<Layout>
  <main
    class="min-h-[70vh] py-10 md:py-16 px-6 flex items-center justify-center"
  >
    <section
      class="w-full max-w-3xl relative overflow-hidden rounded-2xl border border-white/10 bg-gradient-to-b from-zinc-400 to-primary shadow-2xl text-neutral-50 mt-28"
    >
      <!-- Header / Badge -->
      <div class="px-6 py-4 border-b border-white/10 flex items-center gap-3">
        <img
          src={brand.logo}
          alt="JSM Cleaning Solutions logo"
          class="h-16 w-auto"
          loading="eager"
          fetchpriority="high"
        />
        <span class="text-xs uppercase tracking-wider text-neutral-300/80"
          >Confirmation</span
        >
      </div>

      <!-- Content -->
      <div class="px-6 md:px-10 py-10 flex flex-col items-center text-center">
        <div
          class="mb-6 inline-flex items-center justify-center rounded-full border border-emerald-500/40 bg-emerald-500/10 px-4 py-2 text-emerald-300 text-sm"
        >
          Request received
        </div>

        <h1 class="text-3xl md:text-4xl font-bold tracking-tight">{title}</h1>
        <p class="mt-3 text-lg text-neutral-300">{subtitle}</p>

        {
          leadId && (
            <p class="mt-2 text-sm text-neutral-400">
              Reference ID: <code class="text-neutral-200">{leadId}</code>
            </p>
          )
        }
        {
          source && (
            <p class="mt-1 text-xs text-neutral-500">Source: {source}</p>
          )
        }


        <a
          href="/"
          class="mt-4 text-sm text-neutral-400 hover:text-neutral-200 underline underline-offset-4"
        >
          Back to Home
        </a>

        <p class="mt-8 text-xs text-neutral-400">
          If you need immediate assistance, call us at <a
            href="tel:+1508735778"
            class="underline hover:text-neutral-200">+1 (508)-873-5778</a
          >.
        </p>
      </div>
    </section>
  </main>
</Layout>
