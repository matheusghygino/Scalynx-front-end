---
import logo from '../../public/logo_scalyns.png'

const links = [
  { href: "#sobre", label: "Sobre" },
  { href: "#metodologia", label: "Como Trabalhamos" },
  { href: "#pacotes", label: "Pacotes" },
  { href: "#clientes", label: "Clientes" },
];
---
<header
  id="siteHeader"
  class="fixed top-0 left-0 w-full z-50 shadow bg-gray-400 bg-opacity-90 backdrop-blur transition-transform duration-300 -translate-y-0 px-4 md:px-20"
>
  <div class="container mx-auto flex justify-between items-center py-4">
    <a href="/">
      <img src={logo.src} alt="Scalyns" class="h-16 md:h-20 transition-all duration-300" />
    </a>

    <button id="menuButton" class="md:hidden focus:outline-none z-50">
      <svg class="w-6 h-6 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
      </svg>
    </button>

    <nav class="hidden md:flex space-x-10 items-center text-base font-semibold">
      {links.map((link) => (
        <a href={link.href} class="text-gray-700 hover:text-primary transition-colors">{link.label}</a>
      ))}
      <a href="#contato" class="bg-primary text-white px-5 py-2 rounded-full hover:bg-secondary transition">Solicitar Proposta</a>
    </nav>
  </div>

  <div
    id="mobileMenu"
    class="fixed top-0 left-0 w-full h-screen -translate-x-full opacity-0 bg-primary text-white z-40 flex flex-col items-center justify-center text-lg font-semibold transition-all duration-700 ease-in-out"
  >
    <nav class="flex flex-col space-y-6 text-center">
      {links.map((link) => (
        <a href={link.href} class="hover:text-secondary" onclick="closeMobileMenu()">{link.label}</a>
      ))}
      <a href="#contato" class="bg-white text-primary px-6 py-2 rounded-full hover:bg-gray-100 transition" onclick="closeMobileMenu()">Solicitar Proposta</a>
    </nav>
  </div>
</header>

<script>
  window.addEventListener("DOMContentLoaded", () => {
    const header = document.getElementById("siteHeader");
    const menuButton = document.getElementById("menuButton");
    const mobileMenu = document.getElementById("mobileMenu");
    let lastScrollY = window.scrollY;
    let isHidden = false;

    // Esconde header ao rolar
    window.addEventListener("scroll", () => {
      const scrollY = window.scrollY;
      if (scrollY > lastScrollY && scrollY > 100 && !isHidden) {
        header.classList.add("-translate-y-full");
        isHidden = true;
      } else if (scrollY < lastScrollY && isHidden) {
        header.classList.remove("-translate-y-full");
        isHidden = false;
      }
      lastScrollY = scrollY;
    });

    document.addEventListener("mousemove", (e) => {
      if (e.clientY < 50) {
        header.classList.remove("-translate-y-full");
        isHidden = false;
      }
    });

    // Toggle Mobile Menu
    if (menuButton && mobileMenu) {
      menuButton.addEventListener("click", () => {
        mobileMenu.classList.toggle("-translate-x-full");
        mobileMenu.classList.toggle("translate-x-0");
        mobileMenu.classList.toggle("opacity-0");
        mobileMenu.classList.toggle("opacity-100");
      });
    }
  });

  function closeMobileMenu() {
    const mobileMenu = document.getElementById("mobileMenu");
    mobileMenu.classList.add("-translate-x-full", "opacity-0");
    mobileMenu.classList.remove("translate-x-0", "opacity-100");
  }
</script>

<style>
  html {
    scroll-behavior: smooth;
    scroll-padding-top: 100px;
  }
  section {
    scroll-margin-top: 100px;
  }
</style>
